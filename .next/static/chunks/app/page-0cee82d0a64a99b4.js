(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3447:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>R});var i=a(5155),n=a(2115),s=function(e){return e.Marcinkowice="Marcinkowice",e.Stanowice="Stanowice",e}({}),r=a(2596),o=a(9688);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,o.QP)((0,r.$)(t))}let d=(e,t,a,i)=>{let n=[],s=0;for(let r=0;r<e;r++)for(let o=0;o<t;o++)n.push({id:s,xLabel:String.fromCharCode(65+r),yLabel:o+1,top:(i/e*r).toString()+"px",left:(a/t*o).toString()+"px",width:(a/e).toString()+"px",height:(i/t).toString()+"px",border:"0.01em solid black"}),s++;return n};var c=a(9708);let u=(0,a(2085).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function p(e){let{className:t,variant:a,size:n,asChild:s=!1,...r}=e,o=s?c.DX:"button";return(0,i.jsx)(o,{"data-slot":"button",className:l(u({variant:a,size:n,className:t})),...r})}var x=a(3464);let g=a(9509).env.API_URL,f=x.A.create({baseURL:g,timeout:3e4,headers:{"Content-Type":"application/json"},withCredentials:!0});var m=a(9362);let h=async()=>{try{return(await f.get("/api/reports")).data}catch(t){if(t instanceof m.pe){var e;console.error(null===(e=t.response)||void 0===e?void 0:e.data)}}},v=e=>{let{fileName:t}=e,a=[{label:"Nazwa miejsca",key:"place"},{label:"Kwadrat",key:"square"},{label:"Opis miejsca",key:"description"},{label:"Ilość, rodzaj śmieci",key:"amountAndType"}],n=async()=>{let e=await h();if(e){let i=new Blob([[["\uFEFF"],[a[0].label,a[1].label,a[2].label],...e.map(e=>[e.place,e.square,e.description,e.amountAndType])].map(e=>e.join(",")).join("\n")],{type:"text/csv"}),n=URL.createObjectURL(i),s=document.createElement("a");s.href=n,s.download=t||"download.csv",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(n)}};return(0,i.jsx)(p,{onClick:n,children:"Eksportuj CSV"})};var b=a(9601),j=a(450);function y(e){let{...t}=e;return(0,i.jsx)(b.bL,{"data-slot":"dialog",...t})}function w(e){let{...t}=e;return(0,i.jsx)(b.ZL,{"data-slot":"dialog-portal",...t})}function k(e){let{className:t,...a}=e;return(0,i.jsx)(b.hJ,{"data-slot":"dialog-overlay",className:l("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function N(e){let{className:t,children:a,...n}=e;return(0,i.jsxs)(w,{"data-slot":"dialog-portal",children:[(0,i.jsx)(k,{}),(0,i.jsxs)(b.UC,{"data-slot":"dialog-content",className:l("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n,children:[a,(0,i.jsxs)(b.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,i.jsx)(j.A,{}),(0,i.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function S(e){let{className:t,...a}=e;return(0,i.jsx)("div",{"data-slot":"dialog-header",className:l("flex flex-col gap-2 text-center sm:text-left",t),...a})}function C(e){let{className:t,...a}=e;return(0,i.jsx)("div",{"data-slot":"dialog-footer",className:l("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function z(e){let{className:t,...a}=e;return(0,i.jsx)(b.hE,{"data-slot":"dialog-title",className:l("text-lg leading-none font-semibold",t),...a})}function L(e){let{className:t,...a}=e;return(0,i.jsx)(b.VY,{"data-slot":"dialog-description",className:l("text-muted-foreground text-sm",t),...a})}function _(e){let{className:t,type:a,...n}=e;return(0,i.jsx)("input",{type:a,"data-slot":"input",className:l("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}var A=a(968);function M(e){let{className:t,...a}=e;return(0,i.jsx)(A.b,{"data-slot":"label",className:l("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}let O=async(e,t,a,i)=>{try{await f.post("/api/reports",{place:i,square:a,description:e,amountAndType:t})}catch(e){console.error(e)}};function E(e){let{isOpen:t,onClose:a,selectedSquare:s,map:r}=e,[o,l]=(0,n.useState)(""),[d,c]=(0,n.useState)("");return(0,i.jsx)(y,{onOpenChange:a,open:t,children:(0,i.jsxs)(N,{className:"sm:max-w-[425px]",children:[(0,i.jsxs)(S,{children:[(0,i.jsx)(z,{children:"Dodaj dane"}),(0,i.jsx)(L,{})]}),(0,i.jsxs)("div",{className:"grid py-4 gap-4",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,i.jsxs)("p",{children:[r," ",null==s?void 0:s.xLabel,null==s?void 0:s.yLabel]}),(0,i.jsx)(M,{htmlFor:"description",className:"text-right",children:"Opisz dokładnie miejsce"}),(0,i.jsx)(_,{id:"description",placeholder:"Opisz dokładnie miejsce",className:"",onChange:e=>l(e.target.value)})]}),(0,i.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,i.jsx)(M,{htmlFor:"amountAndType",className:"text-right",children:"Ilosć, rodzaj śmieci"}),(0,i.jsx)(_,{id:"amountAndType",placeholder:"Ilosć, rodzaj śmieci",className:"",onChange:e=>c(e.target.value)})]})]}),(0,i.jsx)(C,{children:(0,i.jsx)(p,{type:"submit",onClick:()=>{O(o,d,"".concat(null==s?void 0:s.xLabel).concat(null==s?void 0:s.yLabel),r),a()},children:"Zatwierdź"})})]})})}function R(){let[e,t]=(0,n.useState)(s.Marcinkowice),[a,r]=(0,n.useState)(!1),[o,l]=(0,n.useState)(null),[c,u]=(0,n.useState)(0),[x,g]=(0,n.useState)([]),f=(0,n.useRef)(null),m=(0,n.useRef)(null),h=Array.from({length:25},(e,t)=>String.fromCharCode(65+t)),b=Array.from({length:25},(e,t)=>t+1);return(0,n.useLayoutEffect)(()=>{e===s.Marcinkowice&&m.current&&(u(m.current.height),g(d(25,25,1e3,m.current.height))),e===s.Stanowice&&f.current&&(u(f.current.height),g(d(25,25,1e3,f.current.height)))},[e]),(0,i.jsxs)("div",{className:"",children:[(0,i.jsxs)("div",{className:"example flex flex-col items-center mt-2 overflow-scroll space-y-5",children:[(0,i.jsxs)("div",{className:"flex justify-center mb-4 space-x-2",children:[(0,i.jsx)(p,{onClick:()=>t(s.Marcinkowice),children:"Marcinkowice"}),(0,i.jsx)(p,{onClick:()=>t(s.Stanowice),children:"Stanowice"})]}),(0,i.jsx)("div",{className:"flex justify-center mb-4 space-x-2",children:(0,i.jsx)("h1",{className:"font-bold text-2xl",children:e})}),(0,i.jsxs)("div",{className:"flex mb-10",children:[(0,i.jsx)("div",{children:b.map(e=>(0,i.jsx)("div",{style:{width:"20px",height:(c/25).toString()+"px",display:"flex",alignItems:"center"},children:(0,i.jsx)("div",{children:e})},e))}),(0,i.jsxs)("div",{className:"flex-none relative",children:[e===s.Marcinkowice&&(0,i.jsx)("img",{ref:m,className:"w-[1000px]",src:"marcinkowice.png",alt:"Mapa Marcinkowice"}),e===s.Stanowice&&(0,i.jsx)("img",{ref:f,className:"w-[1000px]",src:"stanowice.png",alt:"Mapa Stanowice"}),x.map(e=>(0,i.jsx)("div",{className:"square",style:{cursor:"pointer",position:"absolute",top:e.top,left:e.left,width:e.width,height:e.height,outline:e.border},onClick:()=>{r(!0),l(e)}},e.id)),h.map((e,t)=>(0,i.jsx)("div",{style:{width:"40px",position:"absolute",top:"-20px",left:(40*t).toString()+"px",textAlign:"center"},children:(0,i.jsx)("div",{children:e})},e))]})]}),(0,i.jsx)(v,{fileName:"export.csv"})]}),(0,i.jsx)(E,{isOpen:a,onClose:()=>r(!1),selectedSquare:o,map:e})]})}a(7944)},6722:(e,t,a)=>{Promise.resolve().then(a.bind(a,3447))},7944:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[577,105,441,684,358],()=>t(6722)),_N_E=e.O()}]);